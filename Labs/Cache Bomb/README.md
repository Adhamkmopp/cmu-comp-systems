# Cache-friendly code

In my attempt to write cache friendly code for a matrix transpose function I came up with three solutions: a simple row by row method, a row by row method in blocks of 4 or 8 depending on the size of the matrix, a zig zag access pattern in blocks of 4 or 8 like before and finally, performing the tranpose in the upper triangular section followed the a lower triangular section (also in blocks). None could outperform the basic blocking method as the amount of conflict misses was staggering. However, with everything else being equal, running the memory trace on a 2-way associative cache increased the performs of the zig zag access pattern signficantly, all the way to the top, followed by triangular method. It just goes to show that writing "cache friendly" code is highly system specific, and one seemingly slight difference can reverse the pattern of performance of one method over another.
